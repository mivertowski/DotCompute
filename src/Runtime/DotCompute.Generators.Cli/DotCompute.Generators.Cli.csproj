<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net9.0</TargetFramework>
    <LangVersion>latest</LangVersion>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <!-- CLI tool suppressions - single-file and sync I/O are acceptable for this tool -->
    <NoWarn>$(NoWarn);CA1305;CA1849;CA1869;IL2026;IL3000;VSTHRD103;IDE0019</NoWarn>

    <!-- CLI tool identification -->
    <AssemblyName>DotCompute.Generators.Cli</AssemblyName>
    <RootNamespace>DotCompute.Generators.Cli</RootNamespace>

    <!-- Single-file publishing for easy distribution -->
    <PublishSingleFile>true</PublishSingleFile>
    <SelfContained>true</SelfContained>
    <RuntimeIdentifiers>win-x64;linux-x64;osx-x64;osx-arm64</RuntimeIdentifiers>
    <EnableCompressionInSingleFile>true</EnableCompressionInSingleFile>

    <!-- Not a NuGet package itself, bundled in DotCompute.Generators -->
    <IsPackable>false</IsPackable>

    <!-- AOT not needed for CLI tool, Roslyn doesn't support it -->
    <IsAotCompatible>false</IsAotCompatible>
    <EnableAotAnalyzer>false</EnableAotAnalyzer>
    <IsTrimmable>false</IsTrimmable>
    <PublishTrimmed>false</PublishTrimmed>
    <EnableSingleFileAnalyzer>false</EnableSingleFileAnalyzer>
    <EnableTrimAnalyzer>false</EnableTrimAnalyzer>
  </PropertyGroup>

  <ItemGroup>
    <!-- Roslyn for code analysis -->
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="5.0.0" />
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp.Workspaces" Version="5.0.0" />

    <!-- Command line parsing - using beta4 for API compatibility -->
    <PackageReference Include="System.CommandLine" Version="2.0.1" />

    <!-- JSON output -->
    <PackageReference Include="System.Text.Json" Version="10.0.1" />
  </ItemGroup>

</Project>
